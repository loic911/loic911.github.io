<!DOCTYPE html>
<html lang="en">

<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">

    <title>CBIRest API documentation</title>

    <!-- Bootstrap Core CSS -->
    <link href="css/bootstrap.min.css" rel="stylesheet">

    <!-- Custom CSS -->
    <link href="css/sb-admin.css" rel="stylesheet">

    <!-- Morris Charts CSS -->
    <link href="css/plugins/morris.css" rel="stylesheet">

    <!-- Custom Fonts -->
    <link href="font-awesome/css/font-awesome.min.css" rel="stylesheet" type="text/css">

    <script src="js/jquery.js"></script>
    <script src="js/bootstrap.min.js"></script>

    <script src="js/rainbow/rainbow.min.js"></script>
    <script src="js/rainbow/language/generic.js"></script>
    <script src="js/rainbow/language/html.js"></script>
    <script src="js/rainbow/language/css.js"></script>
    <script src="js/rainbow/language/javascript.js"></script>
    <script src="js/rainbowlines/rainbow.linenumbers.js"></script>



    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

</head>

<body>

    <div id="wrapper">

        <!-- Navigation -->
        <nav class="navbar navbar-inverse navbar-fixed-top" role="navigation" id="myTab">
            <!-- Brand and toggle get grouped for better mobile display -->
            <div class="navbar-header">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-ex1-collapse">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand" href="index.html">CBIRest API</a>
            </div>
            <!-- Top Menu Items Documentation Report Demo Grails sample project Source code Issues/Bugs Author-->
            <ul class="nav navbar-right top-nav">
                <li>
                    <a href="https://github.com/loic911/CBIRetrieval" target="_blank"><i class="fa fa-gears"></i> CBIR Java lib</a>
                </li>
                <li>
                    <a href="https://github.com/loic911/CBIRestAPI/issues" target="_blank"><i class="fa fa-bug"></i> Issues/Bugs</a>
                </li>
                <li>
                    <a href="https://github.com/loic911/CBIRestAPI" target="_blank"><i class="fa fa-code"></i> Source code</a>
                </li>
            </ul>
            <!-- Sidebar Menu Items - These collapse to the responsive navigation menu on small screens -->
            <div class="collapse navbar-collapse navbar-ex1-collapse">
                <ul class="nav side-nav">
                    <li role="presentation" class="active">
                        <a href="#presentation" aria-controls="presentation" style="color:#999999;"><i class="fa fa-fw fa-home"></i> Presentation</a>
                    </li>
                    <li>
                        <a href="#installation" aria-controls="installation" style="color:#999999;"><i class="fa fa-fw fa-laptop"></i> Installation/run</a>
                    </li>
                    <li >
                        <a href="#configuration" aria-controls="configuration" style="color:#999999;"><i class="fa fa-fw fa-wrench"></i> Configuration</a>
                    </li>
                    <li>
                        <a href="javascript:;" data-toggle="collapse" data-target="#demo" style="color:#999999;"><i class="fa fa-fw fa-arrows-v"></i> Main concepts <i class="fa fa-fw fa-caret-down"></i></a>
                        <ul id="demo" class="collapse">
                            <li>
                                <a href="#http"><i class="fa fa-fw fa-download"></i> HTTP Request</a>
                            </li>
                            <li>
                                <a href="#imagesapi"><i class="fa fa-fw fa-file-image-o"></i> Images API</a>
                            </li>
                            <li>
                                <a href="#storagesapi"><i class="fa fa-fw fa-folder"></i> Storages API</a>
                            </li>
                            <li>
                                <a href="#searchapi"><i class="fa fa-fw fa-search"></i> Search API</a>
                            </li>
                            <li>
                                <a href="#db"><i class="fa fa-fw fa-database"></i> Databases</a>
                            </li>
                            <li>
                                <a href="#performance"><i class="fa fa-fw fa-dashboard"></i> Performance/Speed</a>
                            </li>
                            <li>
                                <a href="#scalability"><i class="fa fa-fw fa-bar-chart"></i> Distributed/Scalability</a>
                            </li>
                        </ul>
                    </li>
                    <li>
                        <a href="#concrete" aria-controls="concrete" style="color:#999999;"><i class="fa fa-fw fa-search-plus"></i> Concrete use case</a>
                    </li>
                    <li>
                        <a href="#help" aria-controls="help" style="color:#999999;"><i class="fa fa-fw fa-question-circle"></i> Help/Questions</a>
                    </li>
                    <li>
                        <a href="#authors" aria-controls="authors" style="color:#999999;"><i class="fa fa-fw fa-user"></i> Contributors/License</a>
                    </li>


                </ul>
            </div>
            <!-- /.navbar-collapse -->
        </nav>


        <div class="tab-content container-fuild" style="padding:30px;" id="page-wrapper">


            <!--
                      _____                          _        _   _
                     |  __ \                        | |      | | (_)
                     | |__) | __ ___  ___  ___ _ __ | |_ __ _| |_ _  ___  _ __
                     |  ___/ '__/ _ \/ __|/ _ \ '_ \| __/ _` | __| |/ _ \| '_ \
                     | |   | | |  __/\__ \  __/ | | | || (_| | |_| | (_) | | | |
                     |_|   |_|  \___||___/\___|_| |_|\__\__,_|\__|_|\___/|_| |_|


            -->
            <div class="tab-pane active container-fuild" id="presentation">

                <h1>Presentation</h1>

                <h2>Introduction</h2>

                <strong>CBIRest</strong> is a Content-based image retrieval (CBIR) web application. Its a REST API for the <a href="https://github.com/loic911/CBIRetrieval" target="_blank">Java CBIRetrieval lib</a>.



                <blockquote>
                    <p>Content-based image retrieval (CBIR), also known as query by image content (QBIC) and content-based visual information retrieval (CBVIR) is the application of computer vision techniques to the image retrieval problem, that is, the problem ofsearching for digital images in large databases. Content-based image retrieval is opposed to traditional concept-based approaches (see Concept based image indexing). "Content-based" means that the search analyzes the contents of the image rather than the metadata such as keywords, tags, or descriptions associated with the image. The term "content" in this context might refer to colors, shapes, textures, or any other information that can be derived from the image itself.</p>
                    <footer><cite title="Wikipedia">Wikipedia</cite></footer>
                </blockquote>

                <img src="images/presentation.jpg" class="img img-responsive"/>

                <p>

                CBIRest API is:
                    <ul>
                        <li><strong>A REST API for CBIR</strong>: You will be able to perform HTTP request to search for similar images and to add/remove images in the CBIR index.</li>
                        <li><strong>web</strong>: packaged with a full web client.</li>
                        <li><strong>incremental</strong>: add new images all over the time.</li>
                        <li><strong>scalable</strong>: run as many server as you want. Client may search on all servers (not yet production ready). </li>
                        <li><strong>easy to customise</strong>: build using Java/Spring (server) and AngularJS (client).</li>
                        <li><strong>free</strong>: Free and Opensource (Apache 2.0). </li>
                    </ul>


                We use these technologies:
                <a href="https://github.com/loic911/CBIRetrieval" target="_blank">CBIRetrieval Java lib</a>,
                <a href="http://projects.spring.io/spring-boot/" target="_blank">Spring boot</a>,
                <a href="https://angularjs.org/" target="_blank">AngularJS</a>,
                <a href="https://http://redis.io/" target="_blank">Redis (NoSQL key value store)</a> and
                <a href="https://jhipster.github.io/" target="_blank">Jhipster</a>

                </p>

                <p class="bg-success" style="padding:15px;">
                    If you are looking for a Content-based image retrieval Java library, you should see <a href="https://github.com/loic911/CBIRetrieval" target="_blank">CBIRetrieval Java lib</a>.
                    It provides the same functionalities as the CBIRest API, but you can use it as a simple app/server (command line) or as a JAR in your own JVM app/server (java import).
                </p>


                <h3>UI interface</h3>

                <p>CBIRest is not only an REST API, its a webapp too. The application is packaged with a web client.
                This is usefull for management task (add, delete images,...) and to perform some tests.</p>

                <p>The web application provides some functionalities:
                    <ul>
                        <li>Search for similar images</li>
                        <li>Add/Delete images from index</li>
                        <li>Manage storages (virtual space)</li>
                        <li>Change user password</li>
                        <li>Server Metrics/Health</li>
                        <li>...</li>
                    </ul>
                </p>

                <div class="row">
                    <div class="col-md-6"><img src="images/UI_welcome_page.png" class="img-responsive img-thumbnail" alt="Full demo doc">
                    </div>
                    <div class="col-md-6"><img src="images/UI_search_image_crop.png" class="img-responsive img-thumbnail" alt="Full demo doc">
                    </div>
                </div>


            </div>

            <!--
                  _____           _        _ _       _   _                 __
                 |_   _|         | |      | | |     | | (_)               / /
                   | |  _ __  ___| |_ __ _| | | __ _| |_ _  ___  _ __    / / __ _   _ _ __
                   | | | '_ \/ __| __/ _` | | |/ _` | __| |/ _ \| '_ \  / / '__| | | | '_ \
                  _| |_| | | \__ \ || (_| | | | (_| | |_| | (_) | | | |/ /| |  | |_| | | | |
                 |_____|_| |_|___/\__\__,_|_|_|\__,_|\__|_|\___/|_| |_/_/ |_|   \__,_|_| |_|

            -->
            <div class="tab-pane active container-fuild" id="installation">
				<h1>Installation</h1>

                <h3>Requirements</h3>

                <ul>
                    <li>Linux, Mac OS (Windows should work)</li>
                    <li>Java 8</li>
                    <li>Redis (not mandatory)</li>
                    <li>Tomcat 7 (not mandatory)</li>
                </ul>


                <p class="bg-warning" style="padding:15px;">Redis is mandatory if you want persistance.
                    If you use Memory mode, you will lost your data if you reboot the app.</p>

                <h3>Download</h3>

                <a href="https://github.com/loic911/CBIRestAPI/releases" target="_blank"><strong>Download the last distribution here</strong></a>

                <p>
                    The retrieval-*.war file from the zip is a war with an embedded TOMCAT server (for quick install).
                    The other war (.war.original) can be install inside a web server/servlet container (only test with tomcat).
                </p>

                <h3>Quick install</h3>

                <ol>
                    <li><a href="https://github.com/loic911/CBIRestAPI/releases" target="_blank">Download the last distribution</a></li>
                    <li>
                        Replace $VERSION with the last version and run:
                          <pre>
                                <code data-language="shell">
    unzip CBIRest-$VERSION.zip
    cd CBIRest-$VERSION
    java -jar retrieval-$VERSION-SNAPSHOT.war --spring.profiles.active=prod --retrieval.store.name=MEMORY
                                </code>
                          </pre>
                    </li>
                    <li>open your browser and go to <i>http://localhost:9999/</i></li>
                </ol>

                <h3>Advanced install</h3>

                The advanced installation use redis instead of a simple memory database.
                <ol>
                    <li><a href="http://redis.io/download">Download Redis</a></li>
                    <li>Install Redis if not yet done.
                        By default, Redis needs to be run on localhost:6379 (default value).
                    </li>
                    <li>Launch Redis if not yet done:
                          <pre>
                                <code data-language="shell">
    ./redis-server
                                </code>
                          </pre>
                    </li>

                    <li>See the Quick install task (replace --retrieval.store.name=MEMORY with --retrieval.store.name=REDIS</i></li>
                </ol>

                if you want to install CBIRest inside a "real" apache tomcat server, you can put move the .war.original file inside the tomcat webapps/ directory.

                <p class="bg-danger" style="padding:15px;">
                    When you are ready, change your user/admin password (user/user, admin/admin by default)!!!
                </p>


                <h3>Perform a quick test</h3>

                When you first run the software, you can easily index a dataset.

                The WANG dataset:
                <ol>
                    <li>
                        Download the <a href="http://wang.ist.psu.edu/~jwang/test1.tar">images archive (+-40MO)</a> from http://wang.ist.psu.edu/docs/related/.
                    </li>
                    <li>
                        Extract the dataset
                    </li>
                    <li>
                        Run this command when you want to start CBIRest (replace $PATH with the dataset path, $VERSION with the good version):
                           <pre>
                                <code data-language="shell">
    java -jar retrieval-$VERSION-SNAPSHOT.war
                                    --spring.profiles.active=prod
                                    --retrieval.store.name=MEMORY
                                    --retrieval.dataset.load=true
                                    --retrieval.dataset.path=$PATH
                                </code>
                          </pre>
                    </li>
                </ol>

                You can take your own dataset. The Dataset must be directory with image number name (0.png, 123.jpg,…).

                <h3>Build from sources</h3>

                <ol>
                    <li>Source can be found on github: <a href="https://github.com/loic911/CBIRestAPI">github.com/loic911/CBIRestAPI</a> </li>
                    <li>
                          <pre>
                                <code data-language="shell">
    mvn -Pprod package -Dmaven.test.skip=true
                                </code>
                          </pre>
                    </li>
                    <li>
                        War(s) should be available in target/
                    </li>
                    <li>
                        Create a new directory based on release/template and copy the war(s) file(s).
                        You should be able to run the installation steps.
                    </li>
                </ol>



            </div>

            <!--
			   _____             __ _                       _   _             
			  / ____|           / _(_)                     | | (_)            
			 | |     ___  _ __ | |_ _  __ _ _   _ _ __ __ _| |_ _  ___  _ __  
			 | |    / _ \| '_ \|  _| |/ _` | | | | '__/ _` | __| |/ _ \| '_ \ 
			 | |___| (_) | | | | | | | (_| | |_| | | | (_| | |_| | (_) | | | |
			  \_____\___/|_| |_|_| |_|\__, |\__,_|_|  \__,_|\__|_|\___/|_| |_|
						               __/ |                                  
						              |___/                                   

            -->
            <div class="tab-pane active container-fuild" id="configuration">
				<h1>Configuration</h1>

                <p>
                    Configuration can be done on multiple level.
                    <ul>
                        <li>CBIRest API: configuration for the main CBIR system. </li>
                        <li>CBIRetrieval: more precise configuration for the CBIR engine.</li>
                        <li>Redis: configuration for the database.</li>
                    </ul>
                </p>


                <h3>CBIRest API Configutation</h3>

                <p>
                    Main configuration flags for CBIRest application.
                    Just append these config params after the "java -jar..." command when you launch the app.
                    E.g. <i>--retrieval.store.name=MEMORY</i>.
                </p>

                <table class="table">
                    <thead>
                        <tr>
                            <th>Name</th>
                            <th>Values</th>
                            <th>By default</th>
                        </tr>
                    </thead>


                    <tr>
                        <td>--retrieval.store.name</td>
                        <td>MEMORY (by default in dev), REDIS (by default in prod)</td>
                        <td>Change the database engine. Memory is not persistant!</td>
                    </tr>

                    <tr>
                        <td>--retrieval.dataset.load</td>
                        <td>true, false (by default)</td>
                        <td>Flag if the app must index a dataset at the startup (see "Perform a quick test" section)</td>
                    </tr>

                    <tr>
                        <td>--retrieval.dataset.path</td>
                        <td>A path</td>
                        <td>Dataset path, only usefull if --retrieval.dataset.load is true </td>
                    </tr>
                </table>



                <h3>CBIRetrieval Configuration</h3>

                <p>CBIRest API is a HTTP API for the CBIRetrieval Java lib. Most of the configuration are defined by the configuration files from CBIRetrieval Java lib: config/ConfigServer.prop and config/ConfigClient.prop.
                Check the config/*.prop files inside your installation package to have the last version.
                The full documentation is available on the <a href="https://github.com/loic911/CBIRetrieval/wiki" target="_blank">CBIRetrieval Java lib wiki</a>.</p>

                <p>You can change these parameters by editing the ConfigServer and configClient.prop files.
                    Some of these configuration can be overrided by the CBIRest API configuration flags. For the default value, check your Config*.prop files.
                </p>



                <p>We just list here the most important flags:</p>

                <table class="table">
                    <thead>
                    <tr>
                        <th>Name</th>
                        <th>Values</th>
                        <th>By default</th>
                    </tr>
                    </thead>


                    <thead>
                    <tr>
                        <th>Database config</th>
                        <th></th>
                        <th></th>
                    </tr>
                    </thead>


                    <tr>
                        <td>STORENAME</td>
                        <td>MEMORY, REDIS</td>
                        <td>Change the database engine. Memory is not persistent!</td>
                    </tr>

                    <tr>
                        <td>REDISHOST</td>
                        <td>IP, server name,...</td>
                        <td>If you use Redis, Redis host.</td>
                    </tr>

                    <tr>
                        <td>REDISPORT</td>
                        <td>Port</td>
                        <td>If you use Redis, Redis port</td>
                    </tr>
                    <thead>
                    <tr>
                        <th>Quality VS speed config</th>
                        <th></th>
                        <th></th>
                    </tr>
                    </thead>

                    <tr>
                        <td>NUMBEROFPATCH</td>
                        <td>Number</td>
                        <td>Number of patch (N) for index request picture. HIGH = better quality, bad perf</td>
                    </tr>
                    <tr>
                        <td>NUMBEROFTV</td>
                        <td>Number (max 50)</td>
                        <td>Number of test vector (T), HIGH = better quality, bad perf</td>
                    </tr>
                    <thead>
                    <tr>
                        <th>Location</th>
                        <th></th>
                        <th></th>
                    </tr>
                    </thead>
                    <tr>
                        <td>VECTORPATH</td>
                        <td>Path</td>
                        <td>Path to the tests vectors (testsvectors/)</td>
                    </tr>
                </table>
            </div>

            <!--
                  _    _ _______ _______ _____    _____                            _
                 | |  | |__   __|__   __|  __ \  |  __ \                          | |
                 | |__| |  | |     | |  | |__) | | |__) |___  __ _ _   _  ___  ___| |_
                 |  __  |  | |     | |  |  ___/  |  _  // _ \/ _` | | | |/ _ \/ __| __|
                 | |  | |  | |     | |  | |      | | \ \  __/ (_| | |_| |  __/\__ \ |_
                 |_|  |_|  |_|     |_|  |_|      |_|  \_\___|\__, |\__,_|\___||___/\__|
                                                                | |
                                                                |_|
            -->
            <div class="tab-pane active container-fuild" id="http">
				<h1>HTTP Request</h1>

                <h2>How it works</h2>

                <h3>Index</h3>
                <p>
                    You first need to index images on the server. CBIRest is incremental, this means that you can add new images to the index all over the time.
                    Index image can be done with a POST /api/images. You need to provide the image binary data as a multipart content.
                    You may specifiy the image id (by default: a random number), the storage (by default: a random storage) and some properties (by default: an empty map).
                </p>

                <h3>Search</h3>
                <p>
                    Simply provides an image and the storages (by default the search will be done on all available storages). The service can be reach thanks to a POST in /api/search.
                    The CBIRest server provides a list of similar pictures (sort by similarities). For each image, the server return the id, storage and properties.
                </p>



                <div class="row">
                    <div class="col-md-6"><img src="images/API_INDEX.png" class="img-responsive img-thumbnail" alt="Full demo doc">
                    </div>
                    <div class="col-md-6"><img src="images/API_SEARCH.png" class="img-responsive img-thumbnail" alt="Full demo doc">
                    </div>
                </div>


            </div>

            <!--
                  _____
                 |_   _|
                   | |  _ __ ___   __ _  __ _  ___  ___
                   | | | '_ ` _ \ / _` |/ _` |/ _ \/ __|
                  _| |_| | | | | | (_| | (_| |  __/\__ \
                 |_____|_| |_| |_|\__,_|\__, |\___||___/
                                         __/ |
                                        |___/
            -->
            <div class="tab-pane active container-fuild" id="imagesapi">
                <h1>Images API</h1>

                <h3>Presentation</h3>

                <p>Each image that appears in the CBIR results needs to be indexed to the server first.
                The server extracts data and index these information in a specific storage database (MEMORY or REDIS).
                    An image is identified with an id (long number) and you may add extra information (like date, path,...).
                    Each time a new image is added, the server saves its thumb on the filesystem too.
                </p>

                <h3>Actions</h3>

                <table class="table">
                    <thead>
                    <tr>
                        <th>Description</th>
                        <th>Verb/Path</th>
                        <th>Params</th>
                        <th>Response</th>
                    </tr>
                    </thead>


                    <tr>
                        <td>Get all images</td>
                        <td><strong>GET /api/images</strong></td>
                        <td></td>
                        <td>
                            List of images data:
                            <pre>
                                <code data-language="javascript">
    [{"id":"0","storage":"3", "key1":"value1",...},...}]
                                </code>
                          </pre>
                        </td>
                    </tr>

                    <tr>
                        <td>Get all images for a storage</td>
                        <td><strong>GET /api/{storage}/images</strong></td>
                        <td><ul><li>PATH storage: storage id</li></td>
                        <td>
                            List of images data:
                            <pre>
                                <code data-language="javascript">
    [{"id":"0","storage":"3", "key1":"value1",...},...}]
                                </code>
                          </pre>
                        </td>
                    </tr>

                    <tr>
                        <td>Get a single image data</td>
                        <td><strong>GET /api/images/{id}</strong>, <strong>GET /api/storages/{storage}/images/{id}</strong> (better for performance)</td>
                        <td><ul><li>PATH id: image id</li><li>PATH storage: storage id</li> </ul></td>
                        <td>
                            Image data:
                            <pre>
                                <code data-language="javascript">
    {"id":"0","storage":"3", "key1":"value1",...}
                                </code>
                          </pre>
                        </td>
                    </tr>

                    <tr>
                        <td>Add a new image</td>
                        <td><strong>POST /api/images</strong></td>
                        <td>
                            <ul>
                                <li>QUERY id: image id (default: random id)</li>
                                <li>QUERY storage: storage id (default: random storage)</li>
                                <li>QUERY keys: list of properties keys (sep ";")</li>
                                <li>QUERY values: list of properties values (sep ";")</li>
                                <li>QUERY async: index image sync or async (default: false)</li>
                                <li>MULTIPART file: image binary data</li>
                            </ul>
                            Rem: if the storage doesn't exist, it will be created.
                        </td>
                        <td>
                            Image data:
                            <pre>
                                <code data-language="javascript">
    {"id":"0","storage":"3", "key1":"value1",...}
                                </code>
                          </pre>
                        </td>
                    </tr>

                    <tr>
                        <td>Delete an image image</td>
                        <td><strong>DELETE /api/storages/{storage}/images/{id}</strong></td>
                        <td>
                            <ul>
                                <li>PATH id: image id</li>
                                <li>PATH storage: storage id</li>
                            </ul>
                        </td>
                        <td>
                            Deleted Image data:
                            <pre>
                                <code data-language="javascript">
    {"id":"0","storage":"3", "key1":"value1",...}
                                </code>
                          </pre>
                        </td>
                    </tr>

                    <tr>
                        <td>Retrieve image thumb</td>
                        <td><strong>GET /api/images/{id}/thumb</strong></td>
                        <td>
                            <ul>
                                <li>PATH id: image id</li>
                            </ul>
                        </td>
                        <td>
                            Image thumb
                        </td>
                    </tr>

                    <tr>
                        <td>Index a full set of data. Quick way to index a lot of images.</td>
                        <td><strong>POST /api/index/full</strong></td>
                        <td>
                            JSON with [{"id":...,"storage":...,"url":...},...]
                        </td>
                        <td>
                        </td>
                    </tr>

                </table>

            </div>
            <!--
               _____ _
              / ____| |
             | (___ | |_ ___  _ __ __ _  __ _  ___  ___
              \___ \| __/ _ \| '__/ _` |/ _` |/ _ \/ __|
              ____) | || (_) | | | (_| | (_| |  __/\__ \
             |_____/ \__\___/|_|  \__,_|\__, |\___||___/
                                         __/ |
                                        |___/
                            -->

            <div class="tab-pane active container-fuild" id="storagesapi">
                <h1>Storages API</h1>

                <h3>Presentation</h3>

                <p>
                    A storage is a virtual space on the server. You can store all images inside a single storage but its not a perfect solution.
                    The storage concept allows you to:
                    <ul>
                        <li><strong>You can filter search by storage:</strong> If you have storages “a”, “b” and “c” , you can perform search requests only on storages “a” and “c”.
                            Less data for the search computation so better performance. This is usefull if your images dataset may be split thanks specific criteria.</li>
                        <li><strong>You can split your dataset:</strong> When you perform a search request, there will be as many threads as storages. When you add an image, there will be one thread for each storage.
                            This means that if you perform a lot of search on all storages, its better to have N storages where N is the number of Core available in the server.</li>
                    </ul>
                </p>

                <h3>Actions</h3>

                <table class="table">
                    <thead>
                    <tr>
                        <th>Description</th>
                        <th>Verb/Path</th>
                        <th>Params</th>
                        <th>Response</th>
                    </tr>
                    </thead>


                    <tr>
                        <td>Get all storages</td>
                        <td><strong>GET /api/storages</strong></td>
                        <td></td>
                        <td>
                            List of storages data:
                            <pre>
                                <code data-language="javascript">
    [{"id":"default","size":0,"queueSize":0,"storageName":"default"},...}
                                </code>
                          </pre>
                        </td>
                    </tr>
                    <tr>
                        <td>Get a specific storage</td>
                        <td><strong>GET /api/storages/{id}</strong></td>
                        <td><ul><li>PATH id: storage id (string)</li></ul></td>
                        <td>
                            Storage data:
                            <pre>
                                <code data-language="javascript">
    {"id":"default","size":0,"queueSize":0,"storageName":"default"}
                                </code>
                          </pre>
                        </td>
                    </tr>

                    <tr>
                     <td>Create a new storage</td>
                        <td><strong>POST /api/storages</strong></td>
                        <td>JSON string in body: {"id":"$NAME"}</td>
                        <td>
                            Storage data:
                                <pre>
                                    <code data-language="javascript">
    {"id":"your_new_storage","size":0,"queueSize":0,"storageName":"your_new_storage"}
                                    </code>
                              </pre>
                        </td>
                    </tr>

                    <tr>
                        <td>Delete a storage. All images data in this storage will be deleted.</td>
                        <td><strong>DELETE /api/storages/{id}</strong></td>
                        <td><ul><li>PATH id: storage id</li></ul></td>
                        <td>
                        </td>
                    </tr>

                </table>

            </div>


            <!--
               _____                     _
              / ____|                   | |
             | (___   ___  __ _ _ __ ___| |__
              \___ \ / _ \/ _` | '__/ __| '_ \
              ____) |  __/ (_| | | | (__| | | |
             |_____/ \___|\__,_|_|  \___|_| |_|

            -->
            <div class="tab-pane active container-fuild" id="searchapi">
                <h1>Search API</h1>

                <h3>Presentation</h3>

                <p>
                    The search API provides methods to search images similarities.
                </p>

                <h3>Actions</h3>

                <table class="table">
                    <thead>
                    <tr>
                        <th>Description</th>
                        <th>Verb/Path</th>
                        <th>Params</th>
                        <th>Response</th>
                    </tr>
                    </thead>


                    <tr>
                        <td>Search for similar images</td>
                        <td><strong>POST /api/search</strong></td>
                        <td>
                            <ul>
                                <li>MULTIPART file: image bytes</li>
                                <li>QUERY max: max number of similar images (default: 30)</li>
                                <li>QUERY storages: storages to query (default: null => all storages), separate with ";"</li>
                                <li>QUERY saveimage: save the request image in image thumb directory (default: false)</li>
                            </ul>
                        </td>
                        <td>
                            Request id and results under "data":
                            <pre>
                                <code data-language="javascript">
    {"id":123,"data":
        [{  "id":"220",
            "properties": {"id":"220","storage":"1"},
            "similarities":1.846E-4},...
        ]
    }
                                </code>
                          </pre>
                        </td>
                    </tr>

                    <tr>
                        <td>Search for similar images</td>
                        <td><strong>POST /api/searchUrl</strong></td>
                        <td>
                            <ul>
                                <li>QUERY url: image url</li>
                                <li>QUERY max: max number of similar images (default: 30)</li>
                                <li>QUERY storages: storages to query (default: null => all storages), separate with ";"</li>
                                <li>QUERY saveimage: save the request image in image thumb directory (default: false)</li>
                            </ul>
                        </td>
                        <td>
                            Request id and results under "data" (for each image: id, storage, properties and similarities):
                            <pre>
                                <code data-language="javascript">
    {"id":123,"data":
                [{  "id":"220",
                    "properties": {"id":"220","storage":"1"},
                    "similarities":1.846E-4},...
                ]
    }
                                </code>
                          </pre>
                        </td>
                    </tr>

                </table>

            </div>

            <div class="tab-pane active container-fuild" id="db">
                <h1>Databases</h1>

                <p>Image data needs to be store in very large hash table.
                You can choose between MEMORY or REDIS implementation.</p>

                <ul>
                    <li><strong>MEMORY</strong>: easy to use (no external app needed) and very fast but it use a lot of memory and its not persistent.
                        If your app crash, you need to index again all images after rebooting.</li>
                    <li><strong>REDIS</strong>: powerful free key-value database with persistence support.</li>
                </ul>


            </div>

            <div class="tab-pane active container-fuild" id="performance">
                <h1>Performance/Speed</h1>

                Some tips to improve performance:
                <ul>
                    <li>
                        <strong>Reduce NUMBEROFPATCH:</strong> Each time you index an image, there will be NUMBEROFPATCH * NUMBEROFTV data that will be store. If you reduce this number, the results quality will be poor but the speed will be better.
                        If you reduce this number in config/ConfigServer.prop file, index and search will be faster. IF YOU CHANGE THIS NUMBER, YOU MUST DROP YOUR EXISTING INDEX AND REINDEX ALL YOUR IMAGES!!!
                        if you reduce this number in config/ConfigClient.prop file, search will be faster (but no need to reindex).
                    </li>
                    <li>
                        <strong>Reduce NUMBEROFTV:</strong> If you reduce this number, the results quality will be poor but the speed will be better too.
                    </li>
                    <li>
                        <strong>MEMORY VS REDIS:</strong> Memory has better performance than Redis.
                    </li>
                    <li>
                        <strong>Use Storage:</strong> See storage section.
                    </li>
                </ul>



            </div>

            <div class="tab-pane active container-fuild" id="scalability">
                <h1>Scalability</h1>

                The <strong>CBIRetrieval Java lib</strong> used in <strong>CBIRest API</strong>.

            </div>
            <!--&lt;!&ndash;-->
              <!--/ __ \| | | |-->
             <!--| |  | | |_| |__   ___ _ __ ___-->
             <!--| |  | | __| '_ \ / _ \ '__/ __|-->
             <!--| |__| | |_| | | |  __/ |  \__ \-->
              <!--\____/ \__|_| |_|\___|_|  |___/-->

            <!--&ndash;&gt;-->

            <!--<div class="tab-pane active container-fuild" id="managementapi">-->
                <!--<h1>Management API</h1>-->

                <!--<h3>Actions</h3>-->

                <!--<table class="table">-->
                    <!--<thead>-->
                    <!--<tr>-->
                        <!--<th>Description</th>-->
                        <!--<th>Verb/Path</th>-->
                        <!--<th>Params</th>-->
                        <!--<th>Response</th>-->
                    <!--</tr>-->
                    <!--</thead>-->


                    <!--<tr>-->
                        <!--<td>Get some data about the server</td>-->
                        <!--<td><strong>GET /api/server</strong></td>-->
                        <!--<td></td>-->
                        <!--<td></td>-->
                    <!--</tr>-->

                <!--</table>-->

            <!--</div>-->



            <!--
               _____                          _
              / ____|                        | |
             | |     ___  _ __   ___ _ __ ___| |_ ___
             | |    / _ \| '_ \ / __| '__/ _ \ __/ _ \
             | |___| (_) | | | | (__| | |  __/ ||  __/
              \_____\___/|_| |_|\___|_|  \___|\__\___|
						                                                                        

            -->
            <div class="tab-pane active container-fuild" id="concrete">
				<h1>Concrete use case</h1>

                <h2>Integration with Cytomine</h2>


                <h3>Cytomine Presentation</h3>

                <p>Cytomine is a rich internet application for visualization, collaborative annotation, and automatic analysis of large-scale bioimages.
                </p>

                <blockquote>
                    <p>The goal of the CYTOMINE project is to develop a modern internet application using data mining for large-scale bioimage exploitation in order to help life scientists to better evaluate drug treatments,
                        understand biological processes, and ease diagnostic. Our application uses fully web-based technologies without the need for the end-user to install proprietary softwares to visualize, annotate, and analyze imaging data.
                        Although our initial focus was on lung cancer and inflammation in cytology and histology images, we seek to provide a generic software and tailored services for other diseases, biological processes, and also other types of high-dimensional imaging data.
                    </p>
                    <footer><cite title="Cytomine">www.cytomine.be</cite></footer>
                </blockquote>

                <p>One of the key concept of Cytomine is the ability to draw annotations on an image.
                You can annotate your images by drawing multiple regions of interest (ellipses, rectangles, polygons, freehand drawings) and associate them to user-defined terms from structured vocabularies (ontologies).
                </p>

                <div class="row">
                    <div class="col-md-6"><img src="images/CYTOMINE_ANNOTATION_DRAW.jpg" class="img-responsive img-thumbnail" alt="Full demo doc">
                    </div>
                    <div class="col-md-6"><img src="images/CYTOMINE_ANNOTATION_CLASSES.png" class="img-responsive img-thumbnail" alt="Full demo doc">
                    </div>
                </div>


                <h3>Retrieval integration with Cytomine</h3>

                <p>
                    Each time a user draw an annotation, we retrieve the annotation images and we send an index HTTP request to the CBIRest API server.

                </p>

                <p>
                    Each time a user click on an annotation, we retrieve the annotation images and we perform a search request on the CBIRest API server. This server responses a sorted list of similar annotations id.
                </p>

                <div class="col-md-12"><img src="images/CYTOMINE_ANNOTATION_RETRIEVAL.png" class="img-responsive img-thumbnail" alt="Full demo doc">
                </div>

                <p>Thanks to the annotations lists and their respective similarities, Cytomine compute the “suggested terms”. If the CBIR results contains a lot of annotation from term X with a high similarities rate, the system suggests this annotation (e.g. Tumor: 91%, artefact: 5%,...).</p>

                <p>In Cytomine, images (and their annotations) are stored inside Projects. A project has its own ontology (terms list) but an ontology can be associated with multiple projects. This means that its not necessary to search on annotations similarities from project with different ontology.
                In Cytomine, we create one storage per project and we index an annotation in its project storage.
                Thanks to that we can search similar annotations only on the current project or on all projects sharing the same ontology. Less computation, better performance!</p>

            </div>


            <div class="tab-pane active container-fuild" id="help">
                <h1>Help/Questions</h1>

                <p>Issues/questions can be post on the <a href="https://github.com/loic911/CBIRestAPI/issues" target="_blank">github issue page</a></p>

                <p>There are a lot of improvement that can be done:
                    <ul>
                        <li>Better integration with redis</li>
                        <li>Improve web UI</li>
                        <li>Add new database support</li>
                    </ul>
                    Don't hesitate to fork/contribute!
                </p>


            </div>

            <div class="tab-pane active container-fuild" id="authors">
                <h1> Contributors/License</h1>

                <p>List of contributors:
                    <ul>
                        <li><a href="http://loic.rollus.be" target="_blank">ROLLUS Loïc</a></li>
                    </ul>
                    <ul>
                        <li><a href="http://www.montefiore.ulg.ac.be/~maree/" target="_blank">MAREE Raphaël</a></li>
                    </ul>
                </p>

                <blockquote>
                    <p>This software is an optimized, multi-threaded, implementation of the algorithm described in this original research article:<br/>
                        <a href="http://orbi.ulg.ac.be/handle/2268/4319" target="_blank">Incremental Indexing and Distributed Image Search using Shared Randomized Vocabularies</a><br/></p>
                    <footer><cite title="Cytomine">Marée, Raphaël; Denis, Philippe; Wehenkel, Louis; Geurts, Pierre
                        in Proc. 11th ACM SIGMM International Conference on Multimedia, Information Retrieval, 2010

                    </cite></footer>
                </blockquote>

                <pre>
                    <code data-language="java">
        /*
        * Copyright 2015. Authors: ROLLUS Loïc.
        *
        * Licensed under the Apache License, Version 2.0 (the "License");
        * you may not use this file except in compliance with the License.
        * You may obtain a copy of the License at
        *
        *      http://www.apache.org/licenses/LICENSE-2.0
        *
        * Unless required by applicable law or agreed to in writing, software
        * distributed under the License is distributed on an "AS IS" BASIS,
        * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
        * See the License for the specific language governing permissions and
        * limitations under the License.
        */
                    </code>
              </pre>



            </div>

        </div>
        <!-- /#page-wrapper -->

    </div>


    <script>
        $(function () {
            $('#myTab a:first').tab('show')
        })
    </script>
    <!-- /#wrapper -->

    <!-- jQuery -->
    <!--<script src="js/jquery.js"></script>-->

    <!--&lt;!&ndash; Bootstrap Core JavaScript &ndash;&gt;-->
    <!--<script src="js/bootstrap.min.js"></script>-->

    <!-- Morris Charts JavaScript -->
    <!--<script src="js/plugins/morris/raphael.min.js"></script>-->
    <!--<script src="js/plugins/morris/morris.min.js"></script>-->
    <!--<script src="js/plugins/morris/morris-data.js"></script>-->

</body>

</html>
